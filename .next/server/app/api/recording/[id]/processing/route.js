"use strict";(()=>{var e={};e.id=9587,e.ids=[9587],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},85826:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var s={};t.r(s),t.d(s,{POST:()=>p});var i=t(73278),o=t(45002),a=t(54877),d=t(82208),n=t(71309);async function p(e,{params:r}){try{let t=await e.json(),{id:s}=r,i=await d.L.user.findUnique({where:{id:s},select:{workspace:{where:{type:"PERSONAL"},select:{id:!0},orderBy:{createdAt:"asc"}}}}),o=await d.L.workSpace.update({where:{id:i?.workspace[0].id},data:{videos:{create:{source:t.filename,userId:s}}},select:{User:{select:{subscription:{select:{plan:!0}}}},folders:{select:{id:!0}},videos:{orderBy:{createdAt:"desc"},take:1,select:{id:!0}}}});console.log("startProcessingVideo->",o);let a=o.folders[0].id,p=o.videos[0].id;if(await d.L.video.update({where:{id:p},data:{folderId:a}}),o)return n.NextResponse.json({status:200,plan:o.User?.subscription?.plan});return n.NextResponse.json({status:400})}catch(e){console.log("Error in processing video",e)}}let c=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/recording/[id]/processing/route",pathname:"/api/recording/[id]/processing",filename:"route",bundlePath:"app/api/recording/[id]/processing/route"},resolvedPagePath:"C:\\Users\\Prajval Bhardwaj\\Desktop\\opal_codes\\video\\src\\app\\api\\recording\\[id]\\processing\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:g}=c,v="/api/recording/[id]/processing/route";function h(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},73278:(e,r,t)=>{e.exports=t(30517)},82208:(e,r,t)=>{t.d(r,{L:()=>i});var s=t(53524);let i=globalThis.prisma||new s.PrismaClient}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9379,1309],()=>t(85826));module.exports=s})();